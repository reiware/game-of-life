const x=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}};x();const e={cellPadding:1,cellSize:16,numberOfCols:10,numberOfRows:10};function X(t,n){const l=new Array(t.length).fill(0);for(let i=0;i<t.length;i++){l[i]=t[i];let o=0;o+=t[i-1]||0,o+=t[i+1]||0,o+=t[i-n]||0,o+=t[i-1-n]||0,o+=t[i+1-n]||0,o+=t[i+n]||0,o+=t[i-1+n]||0,o+=t[i+1+n]||0,o>3||o<2?l[i]=0:o===3&&(l[i]=1)}return l}function Y(t,n,l=e.cellSize,i=e.cellPadding,o=e.numberOfCols){const s=Math.floor(t/(l+i)),f=Math.floor(n/(l+i)),O=s+f*o,S=s*(l+i),I=s*(l+i)+l,L=f*(l+i),C=f*(l+i)+l,E=t>=S&&t<=I,z=n>=L&&n<=C;return E&&z?O:-1}const w=document.getElementById("start-button"),B=document.getElementById("random-button"),M=document.getElementById("clear-button"),R=document.getElementById("iterate-button"),r=document.getElementById("game"),c=r.getContext("2d");let a=!1,b=0,u=0,m=0,d=[],p=0;const g=(t=!1)=>{if(!r||!c)return;d=new Array(e.numberOfCols*e.numberOfRows).fill(0);let n=0;for(let l=0;l<d.length;l++)l>0&&l%e.numberOfCols===0&&(n+=1),t&&(d[l]=Math.round(Math.random())),c.fillStyle=d[l]===1?"rgb(70,70,70)":"rgb(230,230,230)",c.fillRect(e.cellSize*(l%e.numberOfCols)+1*(l%e.numberOfCols),n*e.cellSize+1*n,e.cellSize,e.cellSize)};function y(){if(!r||!c)return;c.clearRect(0,0,r.width,r.height);let t=0;for(let n=0;n<d.length;n++){n>0&&n%e.numberOfCols===0&&(t+=1);const l=e.cellSize*(n%e.numberOfCols)+e.cellPadding*(n%e.numberOfCols),i=t*e.cellSize+e.cellPadding*t;c.fillStyle=d[n]===1?"rgb(70,70,70)":"rgb(230,230,230)",u>=l&&u<=l+e.cellSize&&m>=i&&m<=i+e.cellSize&&(c.fillStyle="rgb(200,200,0)"),c.fillRect(l,i,e.cellSize,e.cellSize),c.fillStyle="black"}c.textAlign="right",c.fillText(`X: ${u}, Y:${m}, Iteration: ${p}`,r.width-20,r.height-20),requestAnimationFrame(y)}function A(){e.numberOfCols=Math.floor(r.width/(e.cellSize+e.cellPadding)),e.numberOfRows=Math.floor(r.height/(e.cellSize+e.cellPadding)),g(),requestAnimationFrame(y)}function h(){d=[...X(d,e.numberOfCols)],p+=1}const v=()=>{r.width=window.innerWidth-32,r.height=window.innerHeight-200,e.numberOfCols=Math.floor(r.width/(e.cellSize+e.cellPadding)),e.numberOfRows=Math.floor(r.height/(e.cellSize+e.cellPadding)),g()};B.addEventListener("click",()=>{g(!0)});M.addEventListener("click",()=>{g()});R.addEventListener("click",()=>{a||h()});w.addEventListener("click",()=>{a=!a,w.innerText=a?"Stop":"Start",a?b=window.setInterval(h,150):clearInterval(b)});r.addEventListener("mousemove",t=>{u=t.clientX-r.offsetLeft+window.screenX,m=t.clientY-r.offsetTop+window.scrollY});window.addEventListener("keypress",t=>{t.code==="NumpadAdd"&&h()});r.addEventListener("mousedown",t=>{const n=Y(t.clientX-r.offsetLeft-window.scrollX,t.clientY-r.offsetTop+window.scrollY);n>=0&&n<d.length&&(d[n]=d[n]===0?1:0)});window.addEventListener("resize",v);v();A();
